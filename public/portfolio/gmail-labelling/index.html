<!DOCTYPE html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Auto-labelling emails using AI | ObserveAutomation </title>
    <link rel="stylesheet" href="../../css/style.css">  
</head>
<body>
    <header>
        <div class="container header-flex">
            <div class="site-title">ObserveAutomation </div>

            <nav>
                <a href="../../">Home</a>
                <a href="../../about">About</a> 
                
                <a href="../../homelab/">Homelab</a>
                <a href="../../portfolio/">Portfolio</a>
                
                <a href="../../contact">Contact</a>
            </nav>
        </div>
    </header>

    <main class="container" >
        
<div class="page-content">
    <h1> Auto-labelling emails using AI </h1>
    <p><em> August 1, 2025 </em></p>
    
    <p>I spend too long every day labelling (or categorising, if you prefer) the many emails I receive.  There has to be a better way!</p>
<p>An automation could automatically read my emails and decide how to label them for me&hellip; and more</p>
<h1 id="auto-labelling-emails">Auto-labelling emails</h1>
<p>As with most projects, this one started with the realisation that I spent too much time sorting  my emails every day and that, once in a while I would miss an important email due to the large number of emails I get daily.</p>
<p>Before jumping into the design, I first listed my &ldquo;requirements&rdquo;:</p>
<ul>
<li>Must read my new emails (Gmail) quickly and often</li>
<li>I must be able to somehow ignore emails from a) certain senders and b) advertisers</li>
<li>I must be able to specify the labels to use</li>
<li>An AI will read the email and classify it into one of the labels</li>
<li>The workflow must then apply the label to the email</li>
<li>The emails to exclude and the labels must be user-configurable</li>
</ul>
<p>An analysis of the requirements allowed me to confirm that all of the requirements can be achieved by using n8n and some external tools (Gmail, GSheets, Anthropic for the AI).</p>
<p>Thus we have this high-level flow:</p>
<p><img alt="Alt" loading="lazy" src="../../portfolio/gmail-labelling/images/Email_Processor_Flow.png"></p>
<p>I wanted the user to be able to update the configuration without having to learn n8n, so I placed the configuration items (emails to exclude, those to mark as advertisers and the labels to use) in a Google Sheet that they can access through their browser.  It&rsquo;s an interface they&rsquo;re used to so they adapted very quickly.</p>
<p>I extended the automation to create draft replies to emails if required (but disabled that).  By placing the replies in the drafts means that nothing leaves the desk without having been viewed/checked by a human!</p>
<p>Here&rsquo;s the final n8n workflow with annotations:</p>
<p><img alt="Alt" loading="lazy" src="../../portfolio/gmail-labelling/images/EmailProcessorworkflowwithcomments.png"></p>
<h2 id="what-does-it-cost">What does it cost?</h2>
<p>The n8n server is running on my own homelab, so other than electrity, there&rsquo;s no direct cost for automation.</p>
<p>The analysis of the job role is done by an LLM in the cloud: Anthropic Clause-3.5-sonnet (via APIs) which is fast but not cheap.  I have tried cheaper models but didn&rsquo;t get the consistency in the labelling I wanted.  Looking at my OpenRouter API balance I can see that each email processed costs less than £0.10.</p>
</div>

    </main>

    <footer>
        <p>© 2025 ObserveAutomation  </p>
    </footer>
</body>
</html>